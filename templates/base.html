<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>{% block title %}Quasar Logistics{% endblock %}</title>

  <!-- Tailwind via CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Mapbox CSS (only if pages use maps) -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.1.0/mapbox-gl.css" rel="stylesheet" />

  <style>
    /* All UI-level styling here to keep pages clean */
    :root { --footer-height: 44px; } /* slimmer footer */
    html,body,#app { height: 100%; }
    /* footer sits in normal flow and will only be visible when scrolled to bottom */
    .sticky-footer {
      position: static; /* not fixed â€” footer will be below content */
      width: 100%;
      background: #0f172a;
      min-height: var(--footer-height);
      box-sizing: border-box;
    }
    /* no extra bottom padding needed when footer is not fixed */
    #app { padding-bottom: 0; }
    /* reduce inner spacing in footer so it appears slimmer */
    .sticky-footer .container { padding: 6px 0; }
    .tab-scroll { max-height: 420px; overflow-y: auto; }
    .map-box { width: 100%; max-width: 720px; aspect-ratio: 1/1; margin: 0 auto; border-radius: 0.75rem; overflow: hidden; border: 1px solid #e6e6e6; }
    .pulse { width: 16px; height: 16px; border-radius: 50%; animation: pulse 2s infinite; }
    @keyframes pulse {
      0% { box-shadow: 0 0 0 0 rgba(0,0,0,0.2); }
      70% { box-shadow: 0 0 0 15px rgba(0,0,0,0); }
      100% { box-shadow: 0 0 0 0 rgba(0,0,0,0); }
    }
  </style>

  {% block head %}{% endblock %}
</head>
<body class="bg-slate-50 min-h-screen flex flex-col">
  <!-- NAV -->
  <nav class="bg-sky-700 text-white shadow">
    <div class="container mx-auto px-4 py-3 flex items-center justify-between">
      <a href="/" class="font-semibold text-lg">Team TRAX</a>
      <div class="space-x-3">
        {% if user %}
          <a href="{{ '/' if user.user_type=='user' else '/dispatcher/dashboard' }}" class="hover:underline">Dashboard</a>
          <a href="/logout" class="hover:underline">Logout</a>
        {% else %}
          <a href="/login" class="hover:underline">Login</a>
          <a href="/signup" class="hover:underline">Sign up</a>
        {% endif %}
      </div>
    </div>
  </nav>

  <main id="app" class="container mx-auto px-4 py-6 flex-1">
    {% block content %}{% endblock %}
  </main>


  <!-- Mapbox JS -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.1.0/mapbox-gl.js"></script>
  {% block scripts %}{% endblock %}
</body>
</html>
